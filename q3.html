<!DOCTYPE html>
<html lang="en">
<head>
  <title>Cancer Diagnosis</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" href="style.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <!-- The core Firebase JS SDK is always required and must be listed first -->
	<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>

	<!-- TODO: Add SDKs for Firebase products that you want to use
	     https://firebase.google.com/docs/web/setup#available-libraries -->
	<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-analytics.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-auth.js"></script>

	<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-database.js"></script>

	<link rel="icon" type="image/png" href="/favicon.png"/>

	<script>
	  // Your web app's Firebase configuration
	  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
	  var firebaseConfig = {
	    apiKey: "AIzaSyDSBbFAqBoxyeauD8Floci3BrD0UkvOhgg",
	    authDomain: "metric-elicitation.firebaseapp.com",
	    databaseURL: "https://metric-elicitation-default-rtdb.firebaseio.com",
	    projectId: "metric-elicitation",
	    storageBucket: "metric-elicitation.appspot.com",
	    messagingSenderId: "828132856142",
	    appId: "1:828132856142:web:1a7f9b6680ed64d1348e1f",
	    measurementId: "G-ZSLY684MQG"
	  };
	  // Initialize Firebase
	  firebase.initializeApp(firebaseConfig);
	  firebase.analytics();
	  database = firebase.database();

	  //data logging is set up here. need to log all the data selected
	  function logdata(){
	  	var uid = localStorage.getItem("uid");
		var q33;
		var q34;
	  	var q33Check = document.getElementsByName('q33');
	  	var q34Check = document.getElementsByName('q34');
	  	var q31 = document.getElementById('q31').value;
	  	var q32 = document.getElementById('q32').value;

	  	for (var i=0;i<q33Check.length;i++){
		  if ( q33Check[i].checked ) {
		    q33 = q33Check[i].value;
		  }
		}

		for (var i=0;i<q34Check.length;i++){
		  if ( q34Check[i].checked ) {
		    q34 = q34Check[i].value;
		  }
		}

	  	var ref = database.ref(uid);
	  	ref.push({
	  		UID: uid,
	  		q31: q31,
	  		q32: q32,
	  		q33: q33,
	  		q34: q34
	  	});

	  	window.setTimeout(function(){

        // Move to a new location or you can do something else
        window.location.href = "q4.html";

    	}, 1000);

	  	// window.location.href = 'prelim.html';
	  }
	  
	</script>
</head>
<body>

<div class="container">

	
		  <h3>Cancer Diagnosis </h3>
		  <p>Please answer the following questions based on the figures below. </p>

			<div class="row"> 
				<div class = "col-md-6">
					<p> <b> Computer System A </b></p> 
					<img id = "bar" src="img/bar.svg">
					<img id = "chart" src="img/chart.svg">
				</div>
				<div class = "col-md-6">
					<p> <b> Computer System B </b></p> 
					<img id = "bar" src="img/bar-2.svg">
					<img id = "chart" src="img/chart-2.svg">
				</div>
			</div>

		  <h4> Questions </h4>

		  <div id = "r1">

			<p>For a new patient, who has cancer, what is the percent likelihood that they will be labelled as low risk by Computer System A? </p>		
			<div class="form-group">
			    <input type="text" class="form-control" placeholder="Response" id = "q31">
			</div>
			
		  </div>

		  <div id = "r2">

			<p>For a new patient, who has cancer, what is the percent likelihood that they will be labelled as low risk by Computer System B? </p>		
			<div class="form-group">
			    <input type="text" class="form-control" placeholder="Response" id = "q32">
			</div>
			
		  </div>


		  <div id = "r3">
			<p> Which computer system is more likely to label a new patient, who has cancer, as low risk?</p>		
			<div class="form-group">

			        <div class="form-check">
			          <input class="form-check-input" type="radio" name="q33" id="gridRadios1" value="A" checked>
			          <label class="form-check-label" for="gridRadios1">
			            Computer System A
			          </label>
			        </div>
			        <div class="form-check">
			          <input class="form-check-input" type="radio" name="q34" id="gridRadios2" value="B">
			          <label class="form-check-label" for="gridRadios2">
			            Computer System B
			          </label>
			        </div>
			</div>
			
		  </div>

		  

		  <button id = "switchbtn" type="button" class="btn btn-success text-right" onclick="logdata()"> Next </button>
	</div>

</div>

</body>
</html>
